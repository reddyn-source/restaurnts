(this.webpackJsonprestaurnts=this.webpackJsonprestaurnts||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,c,r=n(1),s=n.n(r),i=n(5),o=n.n(i),l=(n(12),n(3)),d=n(2);n(13);!function(e){e.byState="byState",e.byGenres="byGenres",e.bySearch="bySearch"}(a||(a={})),function(e){e.Ascending="Ascending",e.Desending="Desending"}(c||(c={}));n(14);var j,u=n(0),b=function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"popup",children:Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("button",{className:"close",onClick:e.onClose,children:"X"}),Object(u.jsx)("h3",{children:"some yummy info"}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"location"}),Object(u.jsx)("div",{children:Object(u.jsx)("a",{href:"https://www.google.com/maps/place/".concat(e.data.lat,",").concat(e.data.long),target:"_blank",rel:"noreferrer",children:"open in google maps"})})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"opening timings"}),Object(u.jsx)("div",{children:e.data.hours.split(";")[0]}),Object(u.jsx)("div",{children:e.data.hours.split(";")[1]})]}),Object(u.jsx)("p",{children:e.data.tags.split(",").map((function(e){return Object(u.jsx)("span",{className:"hastag",children:"#".concat(e)})}))})]})})})};n(16);!function(e){e.left="left",e.right="right"}(j||(j={}));var h=function(e){var t=e.stateQuery,n=void 0===t?"":t,s=e.genreQuery,o=void 0===s?"":s,h=e.searchQuery,O=void 0===h?"":h,f=e.onInputChange,x=e.filterArray,g=e.restaurnts,p=e.onCoulumnHeaderClick,m=e.sortColumn,C=e.sortOrder,y=r.useState(0),v=Object(d.a)(y,2),w=v[0],S=v[1],k=r.useState(!1),A=Object(d.a)(k,2),L=A[0],N=A[1],G=r.useState(),F=Object(d.a)(G,2),Q=F[0],I=F[1],D=function(e){var t=e.currentTarget.dataset.rowid;I(g.filter((function(e){return e.id===t}))[0]),N(!0)},E=r.useMemo((function(){var e=[];return x.length>0?(x.forEach((function(t){var c=e.length>0?e:g;if(t===a.byGenres){var r=c.filter((function(e){return e.genre.toLowerCase().includes(o.toLowerCase())}));e=Object(l.a)(r)}else if(t===a.byState){var s=c.filter((function(e){return e.state.toLowerCase().includes(n.toLowerCase())}));e=Object(l.a)(s)}else{var i=c.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())||e.city.toLowerCase().includes(O.toLowerCase())||e.genre.toLowerCase().includes(O.toLowerCase())}));e=Object(l.a)(i)}})),e):g}),[n,o,O,g,x]),M=Object(l.a)(E).sort((function(e,t){return C===c.Ascending?e[m].toUpperCase()>t[m].toUpperCase()?1:-1:e[m].toUpperCase()<t[m].toUpperCase()?1:-1})),P=C===c.Ascending?String.fromCharCode(8595):String.fromCharCode(8593),U=r.useState(1),T=Object(d.a)(U,2),B=T[0],H=T[1],J=Math.ceil(E.length/10),q=function(e){e.target.dataset.arrow===j.left?(H(B-1),S(w-10)):(H(B+1),S(w+10))};return r.useEffect((function(){H(1),S(0)}),[E]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"inputsearchcontainer",children:[Object(u.jsx)("div",{children:Object(u.jsx)("b",{children:"note:sort, search and filter will perform action on all pages instead of current page and will show the result"})}),Object(u.jsx)("input",{type:"text",value:O,"data-field":a.bySearch,onChange:f,placeholder:"search by name or city or genre","data-testid":"searchbox"})]}),Object(u.jsxs)("table",{children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{onClick:p,"data-column":"name","data-sort":C,"data-testid":"namecolumn",children:"Name  ".concat("name"===m?P:"")}),Object(u.jsx)("th",{children:"City"}),Object(u.jsx)("th",{onClick:p,"data-column":"state","data-sort":C,"data-testid":"statecolumn",children:"State  ".concat("state"===m?P:"")}),Object(u.jsx)("th",{children:"Phone number"}),Object(u.jsx)("th",{children:"Genres"})]})}),Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"text",value:n,"data-field":a.byState,onChange:f,placeholder:"filter by state","data-testid":"statefilter"})}),Object(u.jsx)("td",{}),Object(u.jsx)("td",{children:Object(u.jsx)("input",{type:"text",value:o,"data-field":a.byGenres,onChange:f,placeholder:"filter by genre","data-testid":"genrefilter"})})]}),function(){for(var e=[],t=w;t<w+10&&!(t>=M.length);t++)e.push(Object(u.jsxs)("tr",{onClickCapture:D,"data-rowid":M[t].id,tabIndex:0,"data-testid":"tablerow",children:[Object(u.jsx)("td",{title:M[t].name,children:M[t].name}),Object(u.jsx)("td",{title:M[t].city,children:M[t].city}),Object(u.jsx)("td",{title:M[t].state,children:M[t].state}),Object(u.jsx)("td",{title:M[t].telephone,children:M[t].telephone}),Object(u.jsx)("td",{title:M[t].genre,children:M[t].genre})]},M[t].id));return e}()]}),J>0&&Object(u.jsx)("tfoot",{children:Object(u.jsx)("tr",{children:Object(u.jsxs)("td",{children:[Object(u.jsx)("button",{onClick:q,"data-arrow":j.left,disabled:1===B,children:"<"}),Object(u.jsxs)("span",{children:[" ".concat(B," of ").concat(J)," "]}),Object(u.jsx)("button",{onClick:q,"data-arrow":j.right,disabled:B===J,children:">"})]})})})]}),!!L&&Object(i.createPortal)(Object(u.jsx)(b,{onClose:function(e){N(!1)},data:Q}),document.body),0===J&&Object(u.jsx)("p",{className:"noitem",children:"sorry no items to show please clear search \ud83e\udd1f"})]})};var O=function(){var e=s.a.useState(!0),t=Object(d.a)(e,2),n=t[0],r=t[1],i=s.a.useState([]),o=Object(d.a)(i,2),j=o[0],b=o[1],O=s.a.useState([]),f=Object(d.a)(O,2),x=f[0],g=f[1],p=s.a.useState(""),m=Object(d.a)(p,2),C=m[0],y=m[1],v=s.a.useState(""),w=Object(d.a)(v,2),S=w[0],k=w[1],A=s.a.useState(""),L=Object(d.a)(A,2),N=L[0],G=L[1],F=s.a.useState("name"),Q=Object(d.a)(F,2),I=Q[0],D=Q[1],E=s.a.useState(c.Ascending),M=Object(d.a)(E,2),P=M[0],U=M[1];return s.a.useEffect((function(){fetch("https://code-challenge.spectrumtoolbox.com/api/restaurants",{headers:{Authorization:"Api-Key q3MNxtfep8Gt"}}).then((function(e){return e.json()})).then((function(e){b(e),r(!1)}))}),[]),Object(u.jsx)("div",{className:"App",children:n?"iam loading":Object(u.jsx)(h,{restaurnts:j,stateQuery:C,genreQuery:S,searchQuery:N,onInputChange:function(e){var t=e.target.value,n=e.target.dataset.field,c=x.indexOf(n);switch(n){case a.byGenres:k(t);break;case a.byState:y(t);break;case a.bySearch:G(t)}""===t&&c>-1&&g(x.slice(0,c).concat(x.slice(c+1,x.length))),""!==t&&c<0&&g([].concat(Object(l.a)(x),[n]))},filterArray:x,onCoulumnHeaderClick:function(e){var t=e.target.dataset.column,n=e.target.dataset.sort;D(t),U(n===c.Ascending?c.Desending:c.Ascending)},sortColumn:I,sortOrder:P})})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};o.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root")),f()}],[[17,1,2]]]);
//# sourceMappingURL=main.02e08a6a.chunk.js.map